<html>
<head>
<title>matching</title>

<script type="text/javascript" src="storage.js"></script>
<script type="text/javascript">

namespieler1=storage.getAll()["namespieler1"];
namespieler2=storage.getAll()["namespieler2"];

function alle(){
console.log("alle gestartet");
	mainArray = onload();
	console.log("onload fertig");
	console.log("mainArray: " + mainArray);
	}
antwortvorhanden=false;

		function onclick0(){
		var antwort=true;
		if(antwortvorhanden!=true){
		antwortvorhanden = true;
			if(antwort==mainArray[0]){
			console.log( namespieler1 + " beginnt");
			document.getElementById("winner").innerHTML = namespieler1 + " beginnt";
			starter=namespieler1;
			secondplayer=namespieler2;
			storage.set("name", starter);
			storage.set("secondplayer", secondplayer);
					}
					else{
					console.log(namespieler2 + " beginnt");
					document.getElementById("winner").innerHTML = namespieler2 + " beginnt";
					starter=namespieler2;
					secondplayer=namespieler1
			storage.set("name", starter);
			storage.set("secondplayer", secondplayer);
					}
					}
					else{
						console.log("ergebnis schon vorhanden, da: " + antwortvorhanden);
					}
				}
		function onclick1(){
		var antwort=false;
		if(antwortvorhanden!=true){
		antwortvorhanden=true;
		if (antwort==mainArray[0]){
					console.log( namespieler1 + " beginnt");
					document.getElementById("winner").innerHTML = namespieler1 + " beginnt";
					starter=namespieler1;
					secondplayer=namespieler2;
			storage.set("name", starter);
			storage.set("secondplayer", secondplayer);
					}
						else{
							console.log(namespieler2 + " beginnt");
							document.getElementById("winner").innerHTML = namespieler2 + " beginnt";
							starter=namespieler2;
							secondplayer=namespieler1;
			storage.set("name", starter);
			storage.set("secondplayer", secondplayer);
						}
					}
					else{
						console.log("ergebnis schon vorhanden, da: " + antwortvorhanden);
					}
				}
					
		function onclick2(){
				var antwort=true;
				if(antwortvorhanden!=true){
		antwortvorhanden=true;
			if(antwort==mainArray[1]){
			console.log(namespieler2 + " beginnt");
			document.getElementById("winner").innerHTML = namespieler2 + " beginnt";
			starter=namespieler2;
			secondplayer=namespieler1
			storage.set("name", starter);
			storage.set("secondplayer", secondplayer);
					}
					else{
					console.log(namespieler1 + " beginnt");
					document.getElementById("winner").innerHTML = namespieler1 + " beginnt";
					starter=namespieler1;
					secondplayer=namespieler2;
			storage.set("name", starter);
			storage.set("secondplayer", secondplayer);
					}
					}
					else{
						console.log("ergebnis schon vorhanden, da: " + antwortvorhanden);
					}
				}
				
		function onclick3(){
					var antwort=false;
					if(antwortvorhanden!=true){
		antwortvorhanden=true;
			if(antwort==mainArray[1]){
			console.log(namespieler2 + " beginnt");
			document.getElementById("winner").innerHTML = namespieler2 + " beginnt";
			starter=namespieler2;
			secondplayer=namespieler1;
			storage.set("name", starter);
			storage.set("secondplayer", secondplayer);
					}
					else{
					console.log(namespieler1 + " beginnt");
					document.getElementById("winner").innerHTML = namespieler1 + " beginnt";
					starter=namespieler1;
					secondplayer=namespieler2;
			storage.set("name", starter);
			storage.set("secondplayer", secondplayer);
					}
					}
					else{
						console.log("ergebnis schon vorhanden, da: " + antwortvorhanden);
					}
				}


				
	function onload(){
	console.log("onload gestartet");
		var return0 = ausgabe0();
		console.log(return0);
		var return1 = ausgabe1();
		console.log(return1);
		return [return0, return1];
							}
	
	function sleep(miliseconds) {
           var currentTime = new Date().getTime();

           while (currentTime + miliseconds >= new Date().getTime()) {
           }
       }
	
	function ausgabe0(){
		var min = 5;  //zahlenbereich festlegen
		var max = 10;  //-"-
		var x = Math.round(Math.random() * (max - min)) + min; //erste zufallszahl holen
		var y = Math.round(Math.random() * (max - min)) + min;  //zweite zufallszahl holen
		var a = Math.round(Math.random()); //berechnung f端r die entscheidung ob das angezeigte ergebniss richtig oder falsch ist
		var b = a%2; //holen der zahl f端r die entscheidung
		var richtigesErgebnis = x-y; //richtiges ergebniss
		var falschesErgebnis = richtigesErgebnis+Math.round(Math.random() * (2 - 1)) + 1;
		if (richtigesErgebnis==falschesErgebnis){
		confirm("fail");
		}
		console.log("x= ", x);
		console.log("y= ", y);
		console.log("a= ", a);
		console.log("b= ", b);
		console.log("falsches ergebnis= ", falschesErgebnis);
		console.log("richtiges ergebnis= ", richtigesErgebnis);
		
		if (b==0){						//gib das falsche ergebniss
			document.getElementById("aufgabe0").innerHTML =namespieler1 + " : " + x + "-" + y + "=" + falschesErgebnis;
			return false;
		}
		else {
			document.getElementById("aufgabe0").innerHTML =namespieler1 + " : " + x + "-" + y + "=" + richtigesErgebnis; //zeige richtiges ergebnis
			return true;
		}
	}
	
	function ausgabe1(){
		var min = 5;  //zahlenbereich festlegen
		var max = 10;  //-"-
		var x = Math.round(Math.random() * (max - min)) + min; //erste zufallszahl holen
		var y = Math.round(Math.random() * (max - min)) + min;  //zweite zufallszahl holen
		var a = Math.round(Math.random()); //berechnung f端r die entscheidung ob das angezeigte ergebniss richtig oder falsch ist
		var b = a%2; //holen der zahl f端r die entscheidung
		var richtigesErgebnis = x-y; //richtiges ergebniss
		var falschesErgebnis = richtigesErgebnis+Math.round(Math.random() * (2 - 1)) + 1;
		if (richtigesErgebnis==falschesErgebnis){
		confirm("fail");
		}
		console.log("x= ", x);
		console.log("y= ", y);
		console.log("a= ", a);
		console.log("b= ", b);
		console.log("falsches ergebnis= ", falschesErgebnis);
		console.log("richtiges ergebnis= ", richtigesErgebnis);
				
		if (b==0){						//gib das falsche ergebniss
			document.getElementById("aufgabe1").innerHTML =namespieler2 + " : " + x + "-" + y + "=" + falschesErgebnis;
			return false;
		}
		else {
			document.getElementById("aufgabe1").innerHTML =namespieler2 + " : " +  x + "-" + y + "=" + richtigesErgebnis; //zeige richtiges ergebnis
			return true;
		}
	}
	function weitergehen(){
	if (antwortvorhanden==true){
								location.href='matching_game/index.html';
								}
								else{
									console.log("noch keine entscheidung getroffen, da: " + antwortvorhanden)
									}
	}
	

</script>
<script type="text/javascript" src="storage.js"></script>

</head>
<body onload="alle()">
	
<div width="150px" height="150px" align="center">
	<b id="aufgabe0"></b><br>
	<input name="antwort0tr" type="button" value="richtig" onclick="onclick0()">
	<input type="button" name="antwort0fs" value="falsch" onclick="onclick1()">
	<br><br><br>
	<b id="aufgabe1"></b><br>
	<input type="button" name="antwort1tr" onclick="onclick2()"value="richtig" >
	<input type="button" name="antwort1fs" onclick="onclick3()"value="falsch">
	<br><br>
	<b id="winner"></b><br><br>
	<input type="button" value="Reload Page" onClick="window.location.reload()">
	<button onclick="weitergehen()">weiter</button> 
</div>

</body>
</html>
